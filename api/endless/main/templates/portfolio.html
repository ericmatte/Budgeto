{% extends "main-layout.html" %}

{% block head %}
  <style type='text/css'>
    .first.section {
      background-image: url("/static/portfolio/gradient.png");
      background-repeat: repeat-x;
    }

    .my-gallery {
      width: 100%;
      display: flex;
      display: -webkit-flex; /* Safari 8 */
      flex-wrap: wrap;
      -webkit-flex-wrap: wrap; /* Safari 8 */
      justify-content: center;
      -webkit-justify-content: center; /* Safari 8 */
    }

    .my-gallery img {
      width: auto;
      height: 150px;
    }

    .projects {
      width: 100%;
      display: flex;
      display: -webkit-flex; /* Safari 8 */
      flex-wrap: wrap;
      -webkit-flex-wrap: wrap; /* Safari 8 */
      justify-content: center;
      -webkit-justify-content: center; /* Safari 8 */
    }

    .projects col {
      width: auto;
    }

    .my-gallery figure {
      margin: 0 5px 5px 0;
      height: 150px;
    }

    .my-gallery figcaption {
      display: none;
    }

    .page-footer a:hover {
      color: #FFFFFF !important;
    }

    i.fa {
      font-size: 25px;
      margin-left: 10px;
    }

    .carousel-controls {
      position: absolute;
      right: 0;
      margin-right: 15px;
    }

    .carousel-controls .btn-flat {
      padding-left: 15px;
      padding-right: 15px;
    }

    .my-description {
      text-align: justify;
      text-justify: inter-word;
    }

    .carousel.carousel-slider {
        top: 0;
        left: 0;
        /*height: 280px;*/
    }
  .card-title {
      margin-bottom: 0 !important;
  }
  </style>

  <!-- Core CSS file -->
  <link rel="stylesheet" href="/static/photoswipe/css/photoswipe.css">

  <!-- Skin CSS file (styling of UI - buttons, caption, etc.)
       In the folder of skin CSS file there are also:
       - .png and .svg icons sprite,
       - preloader.gif (for browsers that do not support CSS animations) -->
  <link rel="stylesheet" href="/static/photoswipe/css/default-skin/default-skin.css">
{% endblock %}


{% block full_body %}






  <div class="first section grey lighten-3">
    <div class="row container">
      <!-- INFORMATION BRIEFING -->
      <div class="card-panel grey lighten-5 z-depth-3">

        <div class="row">
          <div class="col s12 m3">
            <img src="/static/portfolio/my-icon.png" alt="" class="circle responsive-img center-align" style="max-height: 200px; display: block; margin: auto;">
            <!-- notice the "circle" class -->
          </div>
          <div class="col s12 m9">
            <div class="black-text">
              <h3>Eric Matte</h3>
              <h5>Student in Computer Engineering</h5>
              <p class="my-description">
                Programmer for more than {{ now.year - 2009 }} years, I’m always seeking for new goals.
                I give a great interest on the quality of my work and I always want to learn more.
                I am passionate about what I do and would like to share what I did along the route on this portfolio.
                <br>
                <i>Have a great tour!</i>
                <br>
                You can get in touch with me by email at <a href="mailto:contact@ericmatte.me" target="_top">contact@ericmatte.me</a>
                or visit my <a href="https://www.linkedin.com/in/%C3%A9ric-matte-91b389a9/" target="_blank">LinkedIn</a>.
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- LIST OF PROJECTS -->
      <h2 class="header">Projects</h2>
      <p class="grey-text text-darken-3 lighten-3">
        This is the list a all my projects which I am really proud to have created, or being part of the team that
        created them.
      </p>

      <div class="projects">
        {% for project in data.projects %}
          <div class="col s12 m6">


            <div id="{{ project.id }}" class="card">
              {% if project.images %}

                {% if project.images | length == 1 %}

                  <img src="{{ project.images[0] }}" style="width: 100%">

                {% else %}

                  <div class="carousel carousel-slider">
                    {% for image in project.images %}
                      <a class="carousel-item"><img src="{{ image }}"></a>
                    {% endfor %}
                  </div>
                {% endif %}

              {% endif %}


              {% if project.video %}
                <video class="responsive-video" controls>
                  <source src="{{ project.video }}" type="video/mp4">
                </video>

              {% endif %}

              <div class="card-content">
                <div class="valign-wrapper" style="margin-bottom: 10px">
                  {% if project.logo %}
                    <img src="{{ project.logo }}" class="circle" style="margin-right:5px; height:48px; width:48px;">
                  {% endif %}
                  <span class="card-title valign">{{ project.title }}</span>
                  {% if project.images and project.images | length > 1 %}
                    <span class="carousel-controls">
                 <a class="waves-effect waves-teal btn-flat"
                    onclick="$('#{{ project.id }} .carousel').carousel('prev');">
                   <i class="material-icons">navigate_before</i>
                 </a>
                 <a class="waves-effect waves-teal btn-flat"
                    onclick="$('#{{ project.id }} .carousel').carousel('next');">
                   <i class="material-icons">navigate_next</i>
                 </a>
               </span>
                  {% endif %}
                </div>
                <p>{{ project.description }}</p>
                <br>
                {% for tag in project.tags %}
                  <div class="chip">
                    {{ tag }}
                  </div>
                {% endfor %}
              </div>
              {% if project.url %}
                <div class="card-action">
                  <a href="{{ project.url }}" target="_blank" class="waves-effect waves-teal">
                    <i class="material-icons">open_in_new</i>
                    See in action
                  </a>
                </div>
              {% endif %}
            </div>
          </div>
        {% endfor %}
      </div>

    </div>
  </div>



  <div class="parallax-container" style="height:300px">
    <div class="parallax"><img src="/static/portfolio/bg2.jpg"></div>
  </div>


  <!-- PICTURES GALLERY -->
  <div class="section grey lighten-3">
    <div class="row container">
      <h2 class="header">Photos</h2>
      <p class="grey-text text-darken-3 lighten-3">
        One thing I really like is go on an adventure and take some beautiful pictures. I enjoy taking capturing and
        editing photos.
        <br>
        I also like to do some video editing and filming. You can see my<a
          href="https://www.youtube.com/channel/UCnrwdpFWs7BVcplngpt0NWA" target="_blank"><i
          class="fa fa-youtube-square" style="font-size:20px" aria-hidden="true"></i> Youtube page</a>.
      </p>

      <div class="my-gallery" itemscope itemtype="http://schema.org/ImageGallery">
        {% for picture in data.pictures %}
          <figure itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
            <a href="{{ picture.url }}" itemprop="contentUrl" data-size="{{ picture.size }}">
              <img src="{{ picture.thumbnail }}" class="responsive-img" itemprop="thumbnail"
                   alt="{{ picture.caption }}"/>
            </a>
            <figcaption itemprop="caption description">{{ picture.caption }}</figcaption>
          </figure>
        {% endfor %}
      </div>
    </div>

    <!-- Root element of PhotoSwipe. Must have class pswp. -->
    <div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
      <!-- Background of PhotoSwipe.
           It's a separate element as animating opacity is faster than rgba(). -->
      <div class="pswp__bg"></div>
      <!-- Slides wrapper with overflow:hidden. -->
      <div class="pswp__scroll-wrap">
        <!-- Container that holds slides.
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
          <div class="pswp__item"></div>
          <div class="pswp__item"></div>
          <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
          <div class="pswp__top-bar">
            <!--  Controls are self-explanatory. Order can be changed. -->
            <div class="pswp__counter"></div>
            <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
            <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
            <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
            <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
            <!-- element will get class pswp__preloader--active when preloader is running -->
            <div class="pswp__preloader">
              <div class="pswp__preloader__icn">
                <div class="pswp__preloader__cut">
                  <div class="pswp__preloader__donut"></div>
                </div>
              </div>
            </div>
          </div>
          <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
            <div class="pswp__share-tooltip"></div>
          </div>
          <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
          <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button>
          <div class="pswp__caption">
            <div class="pswp__caption__center"></div>
          </div>
        </div>
      </div>
    </div>
  </div>






  <!-- FOOTER -->
  <footer class="page-footer grey darken-4" style="padding:0">
    <div class="footer-copyright">
      <div class="container">
        Eric Matte © {{ now.year }}. All rights reserved.
        <a class="grey-text text-lighten-1 right" href="https://www.linkedin.com/in/%C3%A9ric-matte-91b389a9/"
           target="_blank">
          <i class="fa fa-linkedin-square" aria-hidden="true"></i>
        </a>
        <a class="grey-text text-lighten-1 right" href="https://www.youtube.com/channel/UCnrwdpFWs7BVcplngpt0NWA"
           target="_blank">
          <i class="fa fa-youtube-square" aria-hidden="true"></i>
        </a>
      </div>
    </div>
  </footer>


{% endblock %}



{% block js %}

  <!-- Core JS file -->
  <script src="/static/photoswipe/js/photoswipe.min.js"></script>
  <!-- UI JS file -->
  <script src="/static/photoswipe/js/photoswipe-ui-default.min.js"></script>

  <script type="text/javascript">

  $(function() {
      var carousels = $('.carousel.carousel-slider');
      for (var i=0; i<carousels.length; i++) {
          var height = $('.carousel-item img', carousels[i]).first().height();
          $(carousels[i]).height(height);
      }

});

      var initPhotoSwipeFromDOM = function (gallerySelector) {

          // parse slide data (url, title, size ...) from DOM elements
          // (children of gallerySelector)
          var parseThumbnailElements = function (el) {
              var thumbElements = el.childNodes,
                  numNodes = thumbElements.length,
                  items = [],
                  figureEl,
                  linkEl,
                  size,
                  item;

              for (var i = 0; i < numNodes; i++) {

                  figureEl = thumbElements[i]; // <figure> element

                  // include only element nodes
                  if (figureEl.nodeType !== 1) {
                      continue;
                  }

                  linkEl = figureEl.children[0]; // <a> element

                  size = linkEl.getAttribute('data-size').split('x');

                  // create slide object
                  item = {
                      src: linkEl.getAttribute('href'),
                      w: parseInt(size[0], 10),
                      h: parseInt(size[1], 10)
                  };


                  if (figureEl.children.length > 1) {
                      // <figcaption> content
                      item.title = figureEl.children[1].innerHTML;
                  }

                  if (linkEl.children.length > 0) {
                      // <img> thumbnail element, retrieving thumbnail url
                      item.msrc = linkEl.children[0].getAttribute('src');
                  }

                  item.el = figureEl; // save link to element for getThumbBoundsFn
                  items.push(item);
              }

              return items;
          };

          // find nearest parent element
          var closest = function closest(el, fn) {
              return el && ( fn(el) ? el : closest(el.parentNode, fn) );
          };

          // triggers when user clicks on thumbnail
          var onThumbnailsClick = function (e) {
              e = e || window.event;
              e.preventDefault ? e.preventDefault() : e.returnValue = false;

              var eTarget = e.target || e.srcElement;

              // find root element of slide
              var clickedListItem = closest(eTarget, function (el) {
                  return (el.tagName && el.tagName.toUpperCase() === 'FIGURE');
              });

              if (!clickedListItem) {
                  return;
              }

              // find index of clicked item by looping through all child nodes
              // alternatively, you may define index via data- attribute
              var clickedGallery = clickedListItem.parentNode,
                  childNodes = clickedListItem.parentNode.childNodes,
                  numChildNodes = childNodes.length,
                  nodeIndex = 0,
                  index;

              for (var i = 0; i < numChildNodes; i++) {
                  if (childNodes[i].nodeType !== 1) {
                      continue;
                  }

                  if (childNodes[i] === clickedListItem) {
                      index = nodeIndex;
                      break;
                  }
                  nodeIndex++;
              }


              if (index >= 0) {
                  // open PhotoSwipe if valid index found
                  openPhotoSwipe(index, clickedGallery);
              }
              return false;
          };

          // parse picture index and gallery index from URL (#&pid=1&gid=2)
          var photoswipeParseHash = function () {
              var hash = window.location.hash.substring(1),
                  params = {};

              if (hash.length < 5) {
                  return params;
              }

              var vars = hash.split('&');
              for (var i = 0; i < vars.length; i++) {
                  if (!vars[i]) {
                      continue;
                  }
                  var pair = vars[i].split('=');
                  if (pair.length < 2) {
                      continue;
                  }
                  params[pair[0]] = pair[1];
              }

              if (params.gid) {
                  params.gid = parseInt(params.gid, 10);
              }

              return params;
          };

          var openPhotoSwipe = function (index, galleryElement, disableAnimation, fromURL) {
              var pswpElement = document.querySelectorAll('.pswp')[0],
                  gallery,
                  options,
                  items;

              items = parseThumbnailElements(galleryElement);

              // define options (if needed)
              options = {

                  // define gallery index (for URL)
                  galleryUID: galleryElement.getAttribute('data-pswp-uid'),

                  getThumbBoundsFn: function (index) {
                      // See Options -> getThumbBoundsFn section of documentation for more info
                      var thumbnail = items[index].el.getElementsByTagName('img')[0], // find thumbnail
                          pageYScroll = window.pageYOffset || document.documentElement.scrollTop,
                          rect = thumbnail.getBoundingClientRect();

                      return {x: rect.left, y: rect.top + pageYScroll, w: rect.width};
                  }

              };

              // PhotoSwipe opened from URL
              if (fromURL) {
                  if (options.galleryPIDs) {
                      // parse real index when custom PIDs are used
                      // http://photoswipe.com/documentation/faq.html#custom-pid-in-url
                      for (var j = 0; j < items.length; j++) {
                          if (items[j].pid == index) {
                              options.index = j;
                              break;
                          }
                      }
                  } else {
                      // in URL indexes start from 1
                      options.index = parseInt(index, 10) - 1;
                  }
              } else {
                  options.index = parseInt(index, 10);
              }

              // exit if index not found
              if (isNaN(options.index)) {
                  return;
              }

              if (disableAnimation) {
                  options.showAnimationDuration = 0;
              }

              // Pass data to PhotoSwipe and initialize it
              gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);
              gallery.init();
          };

          // loop through all gallery elements and bind events
          var galleryElements = document.querySelectorAll(gallerySelector);

          for (var i = 0, l = galleryElements.length; i < l; i++) {
              galleryElements[i].setAttribute('data-pswp-uid', i + 1);
              galleryElements[i].onclick = onThumbnailsClick;
          }

          // Parse URL and open gallery if it contains #&pid=3&gid=1
          var hashData = photoswipeParseHash();
          if (hashData.pid && hashData.gid) {
              openPhotoSwipe(hashData.pid, galleryElements[hashData.gid - 1], true, true);
          }
      };

      // execute above function
      initPhotoSwipeFromDOM('.my-gallery');
  </script>
{% endblock %}