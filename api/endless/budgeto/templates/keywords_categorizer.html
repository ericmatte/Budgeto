{% extends "main-layout.html" %}

{% block head %}
    <script src='https://cdnjs.cloudflare.com/ajax/libs/dragula/$VERSION/dragula.min.js'></script>
{% endblock %}

{% block body %}
    <h2>Keywords Categorizer</h2>

{% macro create_categories_panels(cat_dict) %}
{% for key, value in cat_dict recursive %}
<div class="{% if value.category.parent_id is none %}col-lg-4{% endif %}">
    <div class="panel panel-default">
        <div class="panel-heading">
            <a data-toggle="collapse" href="#{{ value.category.category_id }}">
            <span name="id">{{ value.category.category_id }}</span>
            -
            <span name="name">{{ value.category.name }}</span>
            </a>
        </div>
        <div id="{{ value.category.category_id }}" class="panel-collapse collapse {% if value.category.parent_id is none %}in{% endif %}">
            <div class="panel-body">
                Keyword, Keyword, Keyword
            </div>
            {% if value.children | length > 0 %}
            <div class="panel-footer">
                {{ loop(value.children.items()) }}
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endfor %}
{% endmacro %}

<div class="row">
    {{ create_categories_panels(categories.items()) }}
</div>

{% endblock %}

{% block js %}
{% endblock %}